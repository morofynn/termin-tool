import{j as e,t as ee}from"./index.C5T5zRsO.js";import{r as a}from"./index.DVzEiDzO.js";import{m as S,c as Be,P as F,a as Z,b as xe,u as ve,d as ye,e as Et,f as A,g as Fe,h as ze,i as De,j as U,L as te,C as de,k as me,B as V,l as ue,n as Rt,o as Tt,p as Dt,M as Nt}from"./event-config.BHtFOfrI.js";import{c as At,u as Pe,a as Bt,b as Ft,C as zt,P as Pt,U as Mt,I as re,M as _t,A as fe,X as $t}from"./index.DniIQrdv.js";function Lt(){return e.jsxs(S.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.2},style:{marginBottom:"clamp(1rem, 4vw, 1.5rem)"},children:[e.jsx("style",{children:`
        @keyframes rotateMinuteHand {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
        
        @keyframes rotateHourHand {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
        
        .minute-hand {
          transform-origin: 50px 50px;
          animation: rotateMinuteHand 4s linear infinite;
        }
        
        .hour-hand {
          transform-origin: 50px 50px;
          animation: rotateHourHand 2s linear infinite;
        }
      `}),e.jsx("div",{style:{width:"clamp(4rem, 15vw, 6rem)",height:"clamp(4rem, 15vw, 6rem)",margin:"0 auto",background:"#fef3c7",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{maxWidth:"clamp(2.5rem, 10vw, 3.5rem)",maxHeight:"clamp(2.5rem, 10vw, 3.5rem)"},children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"#ca8a04",strokeWidth:"3",fill:"none"}),[0,30,60,90,120,150,180,210,240,270,300,330].map(t=>e.jsx("line",{x1:"50",y1:"8",x2:"50",y2:"15",stroke:"#ca8a04",strokeWidth:"2",transform:`rotate(${t} 50 50)`},t)),e.jsx("line",{className:"minute-hand",x1:"50",y1:"50",x2:"50",y2:"15",stroke:"#ca8a04",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{className:"hour-hand",x1:"50",y1:"50",x2:"50",y2:"25",stroke:"#ca8a04",strokeWidth:"3.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"50",cy:"50",r:"4",fill:"#ca8a04"})]})})]})}/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],Ot=Be("calendar-x",Wt);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ut=Be("wrench",Ht);var Gt="Label",Me=a.forwardRef((t,r)=>e.jsx(F.label,{...t,ref:r,onMouseDown:o=>{o.target.closest("button, input, select, textarea")||(t.onMouseDown?.(o),!o.defaultPrevented&&o.detail>1&&o.preventDefault())}}));Me.displayName=Gt;var Kt=Me;function O({className:t,...r}){return e.jsx(Kt,{"data-slot":"label",className:Z("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}function Vt({className:t,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:Z("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","text-gray-900 dark:text-gray-100",t),...r})}var he="rovingFocusGroup.onEntryFocus",qt={bubbles:!1,cancelable:!0},Y="RovingFocusGroup",[ge,_e,Zt]=At(Y),[Yt,$e]=xe(Y,[Zt]),[Xt,Jt]=Yt(Y),Le=a.forwardRef((t,r)=>e.jsx(ge.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ge.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Qt,{...t,ref:r})})}));Le.displayName=Y;var Qt=a.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:o,orientation:i,loop:u=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:v,onEntryFocus:b,preventScrollOnEntryFocus:d=!1,...m}=t,x=a.useRef(null),R=ve(r,x),C=Pe(l),[T,g]=ye({prop:c,defaultProp:f??null,onChange:v,caller:Y}),[h,j]=a.useState(!1),y=Et(b),D=_e(o),$=a.useRef(!1),[L,G]=a.useState(0);return a.useEffect(()=>{const I=x.current;if(I)return I.addEventListener(he,y),()=>I.removeEventListener(he,y)},[y]),e.jsx(Xt,{scope:o,orientation:i,dir:C,loop:u,currentTabStopId:T,onItemFocus:a.useCallback(I=>g(I),[g]),onItemShiftTab:a.useCallback(()=>j(!0),[]),onFocusableItemAdd:a.useCallback(()=>G(I=>I+1),[]),onFocusableItemRemove:a.useCallback(()=>G(I=>I-1),[]),children:e.jsx(F.div,{tabIndex:h||L===0?-1:0,"data-orientation":i,...m,ref:R,style:{outline:"none",...t.style},onMouseDown:A(t.onMouseDown,()=>{$.current=!0}),onFocus:A(t.onFocus,I=>{const X=!$.current;if(I.target===I.currentTarget&&X&&!h){const J=new CustomEvent(he,qt);if(I.currentTarget.dispatchEvent(J),!J.defaultPrevented){const K=D().filter(z=>z.focusable),oe=K.find(z=>z.active),ie=K.find(z=>z.id===T),se=[oe,ie,...K].filter(Boolean).map(z=>z.ref.current);He(se,d)}}$.current=!1}),onBlur:A(t.onBlur,()=>j(!1))})})}),We="RovingFocusGroupItem",Oe=a.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:o,focusable:i=!0,active:u=!1,tabStopId:l,children:c,...f}=t,v=Fe(),b=l||v,d=Jt(We,o),m=d.currentTabStopId===b,x=_e(o),{onFocusableItemAdd:R,onFocusableItemRemove:C,currentTabStopId:T}=d;return a.useEffect(()=>{if(i)return R(),()=>C()},[i,R,C]),e.jsx(ge.ItemSlot,{scope:o,id:b,focusable:i,active:u,children:e.jsx(F.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...f,ref:r,onMouseDown:A(t.onMouseDown,g=>{i?d.onItemFocus(b):g.preventDefault()}),onFocus:A(t.onFocus,()=>d.onItemFocus(b)),onKeyDown:A(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const h=rr(g,d.orientation,d.dir);if(h!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=x().filter(D=>D.focusable).map(D=>D.ref.current);if(h==="last")y.reverse();else if(h==="prev"||h==="next"){h==="prev"&&y.reverse();const D=y.indexOf(g.currentTarget);y=d.loop?nr(y,D+1):y.slice(D+1)}setTimeout(()=>He(y))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:T!=null}):c})})});Oe.displayName=We;var er={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tr(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function rr(t,r,o){const i=tr(t.key,o);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return er[i]}function He(t,r=!1){const o=document.activeElement;for(const i of t)if(i===o||(i.focus({preventScroll:r}),document.activeElement!==o))return}function nr(t,r){return t.map((o,i)=>t[(r+i)%t.length])}var ar=Le,or=Oe,ne="Tabs",[ir,Nr]=xe(ne,[$e]),Ue=$e(),[sr,be]=ir(ne),Ge=a.forwardRef((t,r)=>{const{__scopeTabs:o,value:i,onValueChange:u,defaultValue:l,orientation:c="horizontal",dir:f,activationMode:v="automatic",...b}=t,d=Pe(f),[m,x]=ye({prop:i,onChange:u,defaultProp:l??"",caller:ne});return e.jsx(sr,{scope:o,baseId:Fe(),value:m,onValueChange:x,orientation:c,dir:d,activationMode:v,children:e.jsx(F.div,{dir:d,"data-orientation":c,...b,ref:r})})});Ge.displayName=ne;var Ke="TabsList",lr=a.forwardRef((t,r)=>{const{__scopeTabs:o,loop:i=!0,...u}=t,l=be(Ke,o),c=Ue(o);return e.jsx(ar,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:i,children:e.jsx(F.div,{role:"tablist","aria-orientation":l.orientation,...u,ref:r})})});lr.displayName=Ke;var Ve="TabsTrigger",cr=a.forwardRef((t,r)=>{const{__scopeTabs:o,value:i,disabled:u=!1,...l}=t,c=be(Ve,o),f=Ue(o),v=Ye(c.baseId,i),b=Xe(c.baseId,i),d=i===c.value;return e.jsx(or,{asChild:!0,...f,focusable:!u,active:d,children:e.jsx(F.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":b,"data-state":d?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:v,...l,ref:r,onMouseDown:A(t.onMouseDown,m=>{!u&&m.button===0&&m.ctrlKey===!1?c.onValueChange(i):m.preventDefault()}),onKeyDown:A(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(i)}),onFocus:A(t.onFocus,()=>{const m=c.activationMode!=="manual";!d&&!u&&m&&c.onValueChange(i)})})})});cr.displayName=Ve;var qe="TabsContent",Ze=a.forwardRef((t,r)=>{const{__scopeTabs:o,value:i,forceMount:u,children:l,...c}=t,f=be(qe,o),v=Ye(f.baseId,i),b=Xe(f.baseId,i),d=i===f.value,m=a.useRef(d);return a.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(ze,{present:u||d,children:({present:x})=>e.jsx(F.div,{"data-state":d?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":v,hidden:!x,id:b,tabIndex:0,...c,ref:r,style:{...t.style,animationDuration:m.current?"0s":void 0},children:x&&l})})});Ze.displayName=qe;function Ye(t,r){return`${t}-trigger-${r}`}function Xe(t,r){return`${t}-content-${r}`}var dr=Ge,mr=Ze;function ur({className:t,...r}){return e.jsx(dr,{"data-slot":"tabs",className:Z("flex flex-col gap-2",t),...r})}function fr({className:t,...r}){return e.jsx(mr,{"data-slot":"tabs-content",className:Z("flex-1 outline-none",t),...r})}var ae="Checkbox",[hr,Ar]=xe(ae),[pr,we]=hr(ae);function gr(t){const{__scopeCheckbox:r,checked:o,children:i,defaultChecked:u,disabled:l,form:c,name:f,onCheckedChange:v,required:b,value:d="on",internal_do_not_use_render:m}=t,[x,R]=ye({prop:o,defaultProp:u??!1,onChange:v,caller:ae}),[C,T]=a.useState(null),[g,h]=a.useState(null),j=a.useRef(!1),y=C?!!c||!!C.closest("form"):!0,D={checked:x,disabled:l,setChecked:R,control:C,setControl:T,name:f,form:c,value:d,hasConsumerStoppedPropagationRef:j,required:b,defaultChecked:_(u)?!1:u,isFormControl:y,bubbleInput:g,setBubbleInput:h};return e.jsx(pr,{scope:r,...D,children:xr(m)?m(D):i})}var Je="CheckboxTrigger",Qe=a.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:o,...i},u)=>{const{control:l,value:c,disabled:f,checked:v,required:b,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:R,bubbleInput:C}=we(Je,t),T=ve(u,d),g=a.useRef(v);return a.useEffect(()=>{const h=l?.form;if(h){const j=()=>m(g.current);return h.addEventListener("reset",j),()=>h.removeEventListener("reset",j)}},[l,m]),e.jsx(F.button,{type:"button",role:"checkbox","aria-checked":_(v)?"mixed":v,"aria-required":b,"data-state":ot(v),"data-disabled":f?"":void 0,disabled:f,value:c,...i,ref:T,onKeyDown:A(r,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:A(o,h=>{m(j=>_(j)?!0:!j),C&&R&&(x.current=h.isPropagationStopped(),x.current||h.stopPropagation())})})});Qe.displayName=Je;var et=a.forwardRef((t,r)=>{const{__scopeCheckbox:o,name:i,checked:u,defaultChecked:l,required:c,disabled:f,value:v,onCheckedChange:b,form:d,...m}=t;return e.jsx(gr,{__scopeCheckbox:o,checked:u,defaultChecked:l,disabled:f,required:c,onCheckedChange:b,name:i,form:d,value:v,internal_do_not_use_render:({isFormControl:x})=>e.jsxs(e.Fragment,{children:[e.jsx(Qe,{...m,ref:r,__scopeCheckbox:o}),x&&e.jsx(at,{__scopeCheckbox:o})]})})});et.displayName=ae;var tt="CheckboxIndicator",rt=a.forwardRef((t,r)=>{const{__scopeCheckbox:o,forceMount:i,...u}=t,l=we(tt,o);return e.jsx(ze,{present:i||_(l.checked)||l.checked===!0,children:e.jsx(F.span,{"data-state":ot(l.checked),"data-disabled":l.disabled?"":void 0,...u,ref:r,style:{pointerEvents:"none",...t.style}})})});rt.displayName=tt;var nt="CheckboxBubbleInput",at=a.forwardRef(({__scopeCheckbox:t,...r},o)=>{const{control:i,hasConsumerStoppedPropagationRef:u,checked:l,defaultChecked:c,required:f,disabled:v,name:b,value:d,form:m,bubbleInput:x,setBubbleInput:R}=we(nt,t),C=ve(o,R),T=Bt(l),g=Ft(i);a.useEffect(()=>{const j=x;if(!j)return;const y=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(y,"checked").set,L=!u.current;if(T!==l&&$){const G=new Event("click",{bubbles:L});j.indeterminate=_(l),$.call(j,_(l)?!1:l),j.dispatchEvent(G)}},[x,T,l,u]);const h=a.useRef(_(l)?!1:l);return e.jsx(F.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??h.current,required:f,disabled:v,name:b,value:d,form:m,...r,tabIndex:-1,ref:C,style:{...r.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});at.displayName=nt;function xr(t){return typeof t=="function"}function _(t){return t==="indeterminate"}function ot(t){return _(t)?"indeterminate":t?"checked":"unchecked"}function vr({className:t,...r}){return e.jsx(et,{"data-slot":"checkbox",className:Z("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(rt,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(zt,{className:"size-3.5"})})})}function it(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&t.length<=254}function st(t){const r=/^[\d\s\-\+\(\)\/]+$/,o=t.replace(/\s/g,"");return r.test(t)&&o.length>=6&&o.length<=20}function lt(t){return/^[a-zA-ZÃ¤Ã¶Ã¼Ã„Ã–ÃœÃŸ\s\-]{2,100}$/.test(t)}function yr(t){return t?/^[a-zA-Z0-9Ã¤Ã¶Ã¼Ã„Ã–ÃœÃŸ\s\-\.,&()]{1,200}$/.test(t):!0}function br(t){return t?t.length>1e3?!1:![/<script/i,/<iframe/i,/javascript:/i,/on\w+=/i].some(o=>o.test(t)):!0}function wr(t){return/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(t)}function jr(t){const r={};return lt(t.name)||(r.name="UngÃ¼ltiger Name (min. 2 Zeichen, nur Buchstaben)"),it(t.email)||(r.email="UngÃ¼ltige E-Mail Adresse"),st(t.phone)||(r.phone="UngÃ¼ltige Telefonnummer"),t.company&&!yr(t.company)&&(r.company="UngÃ¼ltiger Firmenname"),t.message&&!br(t.message)&&(r.message="Nachricht enthÃ¤lt ungÃ¼ltige Zeichen oder ist zu lang"),wr(t.time)||(r.time="UngÃ¼ltige Uhrzeit"),{valid:Object.keys(r).length===0,errors:r}}function kr(){const[t,r]=a.useState(De()),[o,i]=a.useState(!0);return a.useEffect(()=>{async function u(){try{const l=await fetch(`${U}/api/admin/settings`);if(l.ok){const c=await l.json(),f=De(c.settings);r(f)}}catch(l){console.error("Error fetching event config:",l)}finally{i(!1)}}u()},[]),{config:t,loading:o}}function pe(t,r){return new Date(r.dates[t])}const H=["friday","saturday","sunday"],Ne={friday:Array.from({length:15},(t,r)=>{const o=Math.floor(r/2)+10,i=r%2===0?"00":"30";return`${o.toString().padStart(2,"0")}:${i}`}),saturday:Array.from({length:15},(t,r)=>{const o=Math.floor(r/2)+10,i=r%2===0?"00":"30";return`${o.toString().padStart(2,"0")}:${i}`}),sunday:Array.from({length:13},(t,r)=>{const o=Math.floor(r/2)+10,i=r%2===0?"00":"30";return`${o.toString().padStart(2,"0")}:${i}`})},q="#2d62ff",Ae="#f5f8ff",M={textDark:"#1f2937",textBlack:"#111827",white:"#ffffff",grayBorder:"#e5e7eb"};function Br(){const{config:t}=kr(),r={friday:t.shortLabels.friday,saturday:t.shortLabels.saturday,sunday:t.shortLabels.sunday},o={friday:pe("friday",t),saturday:pe("saturday",t),sunday:pe("sunday",t)},[i,u]=a.useState(!1),[l,c]=a.useState("friday"),[f,v]=a.useState(""),[b,d]=a.useState({}),[m,x]=a.useState(!1),[R,C]=a.useState(!1),[T,g]=a.useState(!1),[h,j]=a.useState(!1),[y,D]=a.useState({day:"",time:"",autoConfirmed:!0,id:""}),[$,L]=a.useState(null),[G,I]=a.useState([]),[X,J]=a.useState(2),[K,oe]=a.useState(!0),[ie,je]=a.useState("Ihre Nachricht..."),[se,z]=a.useState("info@moro-gmbh.de"),[ke,ct]=a.useState(""),[dt,mt]=a.useState({friday:!0,saturday:!0,sunday:!0}),[ut,ft]=a.useState(!1),[ht,pt]=a.useState("Das Buchungssystem ist vorÃ¼bergehend nicht verfÃ¼gbar. Bitte versuchen Sie es spÃ¤ter erneut."),[gt,Se]=a.useState(!1),[k,W]=a.useState({name:"",company:"",phone:"",email:"",message:""}),[Sr,Cr]=a.useState({}),[Q,Ce]=a.useState(!1),[xt,le]=a.useState(!1),[ce,vt]=a.useState(!1),w=n=>{console.log(`[AppointmentScheduler] ${n}`),I(s=>[...s,`${new Date().toISOString()}: ${n}`])},Ie=(n,s)=>{try{const p=new Date,E=o[n],[P,N]=s.split(":").map(Number),B=new Date(E);return B.setHours(P,N,0,0),B<p}catch(p){return console.error("Error checking if slot is in past:",p),!1}};a.useEffect(()=>{w("Component mounted"),u(!0),yt(),Ee()},[]);const yt=async()=>{try{w(`Fetching settings from: ${U}/api/admin/settings`);const n=await fetch(`${U}/api/admin/settings`);if(n.ok){const s=await n.json();J(s.settings.maxBookingsPerSlot||2),oe(s.settings.showSlotIndicator!==!1),je(s.settings.messagePlaceholder||"Ihre Nachricht..."),z(s.settings.companyEmail||"info@moro-gmbh.de"),ct(s.settings.logoUrl||""),mt(s.settings.availableDays||{friday:!0,saturday:!0,sunday:!0}),ft(s.settings.maintenanceMode||!1),pt(s.settings.maintenanceMessage||"Das Buchungssystem ist vorÃ¼bergehend nicht verfÃ¼gbar. Bitte versuchen Sie es spÃ¤ter erneut.");const p=s.settings.eventEnded||!1;let E=!1;if(s.settings.eventDateSunday)try{const B=new Date(s.settings.eventDateSunday);B.setHours(23,59,59,999);const Te=new Date;E=Te>B,E&&!p&&w(`Event automatically ended: current time ${Te.toISOString()} > event end ${B.toISOString()}`)}catch(B){console.error("Error parsing event end date:",B)}const P=p||E;Se(P),p&&w("Event manually ended via toggle"),w(`Settings loaded successfully, Event Ended: ${P}`);const N=["friday","saturday","sunday"].find(B=>s.settings.availableDays?.[B]!==!1);N&&s.settings.availableDays?.[N]&&c(N)}else w(`Settings fetch failed: ${n.status}`)}catch(n){w(`Settings fetch error: ${n instanceof Error?n.message:"Unknown"}`),console.error("Error loading settings:",n)}},Ee=async()=>{try{w("Starting fetchAvailability..."),x(!1);const n=`${U}/api/availability`;w(`Fetching from: ${n}`);const s=await fetch(n);if(w(`Response status: ${s.status} ${s.statusText}`),s.ok){const p=await s.json();w(`Received availability data with ${Object.keys(p).length} slots`),d(p),x(!0),w("Availability loaded successfully")}else{const p=await s.text();w(`Availability fetch failed: ${p}`),L(`API Error: ${s.status}`),x(!0)}}catch(n){const s=n instanceof Error?n.message:"Unknown error";w(`Error in fetchAvailability: ${s}`),console.error("Error fetching availability:",n),L(`Fetch Error: ${s}`),x(!0)}},Re=(n,s)=>{const p=`${n}-${s}`,E=b[p];return Ie(n,s)?{booked:0,available:!1}:E||{booked:0,available:!0}},bt=()=>{const n=!ce;vt(n),Se(n),w(`Event ended test: ${n}`)},wt=async n=>{if(n.preventDefault(),w("Form submitted"),!f){ee.error("Bitte wÃ¤hlen Sie einen Zeitpunkt");return}if(!Q){ee.error("Bitte akzeptieren Sie die Datenschutzbestimmungen");return}C(!0),g(!0);try{const s=await fetch(`${U}/api/book-appointment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({day:l,time:f,...k})}),p=await s.json();w(`Booking response: ${JSON.stringify(p)}`),await new Promise(E=>setTimeout(E,2e3)),s.ok?(D({day:r[l],time:f,autoConfirmed:p.autoConfirmed!==void 0?p.autoConfirmed:!0,id:p.appointmentId||""}),g(!1),setTimeout(()=>{j(!0)},300),W({name:"",company:"",phone:"",email:"",message:""}),Ce(!1),v(""),await Ee()):(g(!1),ee.error(p.message||"Fehler beim Buchen"))}catch(s){g(!1);const p=s instanceof Error?s.message:"Unknown error";w(`Booking error: ${p}`),ee.error("Ein Fehler ist aufgetreten"),console.error("Booking error:",s)}finally{C(!1)}},jt=()=>{w("Reset to booking"),j(!1)},kt=()=>H.indexOf(l),St=n=>m?Ne[n].every(p=>!Re(n,p).available):!1,Ct=n=>!dt[n];if(!i)return e.jsx("div",{style:{maxWidth:"42rem",margin:"0 auto",padding:"1.5rem",minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Lade Termin-Tool..."})]})});if(ut)return e.jsx("div",{style:{minHeight:"100vh",background:"transparent",position:"relative"},children:e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},style:{maxWidth:"clamp(20rem, 90vw, 42rem)",margin:"0 auto",padding:"clamp(2rem, 8vw, 4rem)",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(de,{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.2)",borderRadius:"1.5rem",border:"none",overflow:"hidden",textAlign:"center",color:"#ffffff"},children:e.jsxs(me,{style:{padding:"clamp(2rem, 8vw, 4rem)"},children:[e.jsx(S.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.2},style:{marginBottom:"clamp(1rem, 4vw, 2rem)"},children:e.jsx("div",{style:{width:"clamp(4rem, 15vw, 6rem)",height:"clamp(4rem, 15vw, 6rem)",margin:"0 auto",background:"rgba(255, 255, 255, 0.2)",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(S.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(Ut,{style:{width:"clamp(2.5rem, 10vw, 3.5rem)",height:"clamp(2.5rem, 10vw, 3.5rem)",color:"#ffffff"}})})})}),e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 5vw, 2.5rem)",fontWeight:700,marginBottom:"clamp(1rem, 3vw, 1.5rem)",lineHeight:1.2},children:"Wartungsmodus"}),e.jsx("p",{style:{fontSize:"clamp(1rem, 3.5vw, 1.25rem)",opacity:.95,lineHeight:1.6,maxWidth:"32rem",margin:"0 auto"},children:ht})]})})})});if(gt||ce)return e.jsxs("div",{style:{minHeight:"100vh",background:"transparent",position:"relative"},children:[ce&&e.jsx("div",{style:{position:"fixed",top:"1rem",left:"1rem",zIndex:100},children:e.jsxs(V,{type:"button",variant:"outline",size:"sm",onClick:bt,className:"shadow-lg hover:shadow-xl transition-all",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",border:"none",color:"#ffffff",padding:"0.625rem 1rem",borderRadius:"0.75rem",fontSize:"0.875rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ue,{className:"w-4 h-4"}),"Stop Event End"]})}),e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},style:{maxWidth:"clamp(20rem, 90vw, 42rem)",margin:"0 auto",padding:"clamp(2rem, 8vw, 4rem)",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(de,{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.2)",borderRadius:"1.5rem",border:"none",overflow:"hidden",textAlign:"center",color:"#ffffff"},children:e.jsxs(me,{style:{padding:"clamp(2rem, 8vw, 4rem)"},children:[e.jsx(S.div,{initial:{scale:0,y:20},animate:{scale:1,y:0},transition:{type:"spring",stiffness:200,damping:15,delay:.2},style:{marginBottom:"clamp(1rem, 4vw, 2rem)"},children:e.jsx("div",{style:{width:"clamp(4rem, 15vw, 6rem)",height:"clamp(4rem, 15vw, 6rem)",margin:"0 auto",background:"rgba(255, 255, 255, 0.2)",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:e.jsx(S.div,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Pt,{style:{width:"clamp(2.5rem, 10vw, 3.5rem)",height:"clamp(2.5rem, 10vw, 3.5rem)",color:"#ffffff"}})})})}),e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 5vw, 2.5rem)",fontWeight:700,marginBottom:"clamp(1rem, 3vw, 1.5rem)",lineHeight:1.2},children:"Vielen Dank, dass ihr dabei wart!"}),e.jsxs("p",{style:{fontSize:"clamp(1rem, 3.5vw, 1.25rem)",opacity:.95,lineHeight:1.6,maxWidth:"32rem",margin:"0 auto"},children:["Wir sehen uns im nÃ¤chsten Jahr wieder auf der ",t.name,"."]})]})})})]});const It=()=>e.jsx(fe,{children:xt&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},onClick:()=>le(!1),children:e.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:n=>n.stopPropagation(),style:{backgroundColor:"#ffffff",borderRadius:"1rem",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"hidden",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.2)",position:"relative"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"#111827"},children:"Datenschutzbestimmungen"}),e.jsx("button",{onClick:()=>le(!1),style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:n=>n.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:n=>n.currentTarget.style.backgroundColor="transparent",children:e.jsx($t,{style:{width:"1.5rem",height:"1.5rem"}})})]}),e.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",maxHeight:"calc(80vh - 100px)",color:"#374151",lineHeight:1.6},children:[e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",color:"#111827"},children:"Erhebung und Verarbeitung personenbezogener Daten"}),e.jsxs("p",{style:{marginBottom:"1rem"},children:["Ihre personenbezogenen Daten (Name, Betrieb, Telefonnummer, E-Mail-Adresse und optionale Nachricht) werden ausschlieÃŸlich zur Terminverwaltung und Kontaktaufnahme im Rahmen der ",t.name," verwendet."]}),e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",marginTop:"1.5rem",color:"#111827"},children:"Zweck der Datenverarbeitung"}),e.jsxs("ul",{style:{marginBottom:"1rem",paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"Verwaltung Ihrer Terminbuchung"}),e.jsx("li",{children:"BestÃ¤tigung und Erinnerung an Ihren Termin"}),e.jsx("li",{children:"Kontaktaufnahme bei RÃ¼ckfragen oder Ã„nderungen"}),e.jsx("li",{children:"Synchronisation mit unserem internen Kalender (Google Calendar)"})]}),e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",marginTop:"1.5rem",color:"#111827"},children:"Speicherung und LÃ¶schung"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"Ihre Daten werden gespeichert, bis Sie Ihren Termin stornieren oder Sie uns zur LÃ¶schung auffordern."}),e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",marginTop:"1.5rem",color:"#111827"},children:"Weitergabe an Dritte"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"Ihre Daten werden nicht an Dritte weitergegeben. Die Speicherung erfolgt auf sicheren Servern der Cloudflare Workers Plattform (KV Store) und in unserem Google Calendar."}),e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",marginTop:"1.5rem",color:"#111827"},children:"Ihre Rechte"}),e.jsx("p",{style:{marginBottom:"1rem"},children:"Sie haben jederzeit das Recht auf Auskunft, Berichtigung, LÃ¶schung und EinschrÃ¤nkung der Verarbeitung Ihrer personenbezogenen Daten. Sie kÃ¶nnen Ihren Termin auch selbststÃ¤ndig Ã¼ber den BestÃ¤tigungslink stornieren."}),e.jsx("h4",{style:{fontWeight:600,marginBottom:"0.75rem",marginTop:"1.5rem",color:"#111827"},children:"Kontakt"}),e.jsxs("p",{style:{marginBottom:"0"},children:["Bei Fragen zum Datenschutz kontaktieren Sie uns unter:",e.jsx("br",{}),e.jsx("strong",{children:se})]})]})]})})});try{return e.jsxs("div",{style:{minHeight:"100vh",background:"transparent",position:"relative"},children:[e.jsx(It,{}),!1,e.jsx(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},style:{maxWidth:"clamp(20rem, 90vw, 42rem)",margin:"0 auto",padding:"clamp(0.75rem, 2vw, 1.5rem)"},children:e.jsx("div",{style:{position:"relative"},children:e.jsxs(de,{style:{background:"#ffffff",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",borderRadius:"1rem",border:"none",overflow:"hidden"},children:[e.jsxs(me,{style:{padding:"clamp(1rem, 3vw, 1.5rem)",paddingTop:"clamp(1.5rem, 4vw, 2rem)",opacity:h?0:1,pointerEvents:h?"none":"auto",transition:"opacity 0.3s ease"},children:[ke&&e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"clamp(1.5rem, 4vw, 2rem)"},children:e.jsx("img",{src:ke,alt:"Logo",style:{maxWidth:"clamp(120px, 40vw, 200px)",height:"auto",objectFit:"contain"}})}),e.jsxs("form",{onSubmit:wt,style:{display:"flex",flexDirection:"column",gap:"clamp(1rem, 3vw, 1.5rem)"},children:[e.jsx("div",{children:e.jsxs(ur,{value:l,onValueChange:n=>{w(`Day changed to: ${n}`),c(n)},children:[e.jsxs("div",{style:{position:"relative",background:"#f3f4f6",borderRadius:"0.75rem",padding:"clamp(0.25rem, 1vw, 0.375rem)",isolation:"isolate"},children:[e.jsx(S.div,{style:{position:"absolute",backgroundColor:q,width:`calc(${100/H.length}% - 6px)`,zIndex:1,top:"clamp(0.25rem, 1vw, 0.375rem)",bottom:"clamp(0.25rem, 1vw, 0.375rem)",borderRadius:"0.5rem",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)",pointerEvents:"none"},layoutId:"activeTab",initial:!1,animate:{left:`calc(${kt()*(100/H.length)}% + 6px)`},transition:{type:"spring",stiffness:260,damping:20,mass:.8}}),e.jsx("div",{style:{position:"relative",display:"grid",width:"100%",gridTemplateColumns:`repeat(${H.length}, 1fr)`,zIndex:2,gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:H.map(n=>{const s=l===n;return e.jsx("button",{type:"button",onClick:()=>c(n),style:{position:"relative",fontWeight:500,borderRadius:"0.5rem",transition:"color 0.2s",background:"transparent",border:"none",cursor:"pointer",color:s?"#ffffff":"#000000",zIndex:3,fontSize:"clamp(0.75rem, 2.5vw, 0.875rem)",padding:"clamp(0.5rem, 2vw, 0.625rem)"},children:r[n]},n)})})]}),H.map(n=>e.jsx(fr,{value:n,style:{marginTop:"clamp(0.75rem, 2vw, 1rem)"},children:m?St(n)||Ct(n)?e.jsx("div",{style:{textAlign:"center",padding:"clamp(2rem, 6vw, 3rem) clamp(1rem, 3vw, 1.5rem)",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:"1rem",border:"2px solid #fbbf24"},children:e.jsxs(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[e.jsx(S.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15},style:{marginBottom:"clamp(0.75rem, 2vw, 1rem)"},children:e.jsx("div",{style:{width:"clamp(3rem, 10vw, 4rem)",height:"clamp(3rem, 10vw, 4rem)",margin:"0 auto",background:"#fbbf24",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ot,{style:{width:"clamp(1.5rem, 5vw, 2rem)",height:"clamp(1.5rem, 5vw, 2rem)",color:"#ffffff"}})})}),e.jsx("p",{style:{color:"#92400e",fontSize:"clamp(0.875rem, 3vw, 1rem)",lineHeight:1.6,fontWeight:500},children:"Leider sind keine freien Termine mehr fÃ¼r diesen Tag verfÃ¼gbar."}),e.jsx("p",{style:{color:"#92400e",fontSize:"clamp(0.875rem, 3vw, 1rem)",lineHeight:1.6,marginTop:"clamp(0.5rem, 1.5vw, 0.75rem)"},children:"Kommen Sie aber gerne spontan bei uns am Stand vorbei! :)"})]})}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"clamp(0.375rem, 1.5vw, 0.5rem)"},children:Ne[n].map(s=>{const p=Re(n,s),E=f===s,P=!p.available,N=Ie(n,s);return e.jsxs("div",{style:{position:"relative"},children:[e.jsx(V,{type:"button",variant:"outline",disabled:P||N,onClick:()=>{!N&&!P&&(w(`Time selected: ${s}`),v(s))},style:{width:"100%",fontWeight:600,borderRadius:"0.75rem",transition:"all 0.2s",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)",backgroundColor:E?q:M.white,borderColor:E?q:M.grayBorder,color:E?Ae:M.textBlack,fontSize:"clamp(0.75rem, 2vw, 0.875rem)",padding:"clamp(0.5rem, 2vw, 0.625rem) clamp(0.25rem, 1vw, 0.5rem)",opacity:P||N?.3:1,cursor:P||N?"not-allowed":"pointer"},children:s}),K&&p.booked>0&&!N&&e.jsxs(Rt,{variant:p.booked>=X?"destructive":"secondary",style:{position:"absolute",top:"-0.25rem",right:"-0.25rem",fontSize:"10px",height:"1rem",padding:"0 0.375rem",borderRadius:"9999px",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)",zIndex:10},children:[p.booked,"/",X]})]},s)})}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",minHeight:"200px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(te,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"VerfÃ¼gbarkeit wird geladen..."})]})})},n))]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.75rem, 2vw, 1rem)"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2",style:{gap:"clamp(0.75rem, 2vw, 1rem)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:[e.jsxs(O,{htmlFor:"name",style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",fontWeight:500,color:"#374151"},children:[e.jsx(Mt,{style:{width:"1rem",height:"1rem",flexShrink:0}}),e.jsx("span",{children:"Name *"})]}),e.jsx(re,{id:"name",required:!0,value:k.name,onChange:n=>W({...k,name:n.target.value}),placeholder:"Max Mustermann",className:"rounded-xl border-gray-200 bg-white shadow-sm focus:shadow-md",style:{color:M.textDark,height:"clamp(2rem, 5vw, 2.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",borderColor:k.name&&!lt(k.name)?"#ef4444":void 0}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:[e.jsxs(O,{htmlFor:"company",style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",fontWeight:500,color:"#374151"},children:[e.jsx(Tt,{style:{width:"1rem",height:"1rem",flexShrink:0}}),e.jsx("span",{children:"Betrieb"})]}),e.jsx(re,{id:"company",value:k.company,onChange:n=>W({...k,company:n.target.value}),placeholder:"Firma GmbH",style:{color:M.textDark,height:"clamp(2rem, 5vw, 2.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)"},className:"rounded-xl border-gray-200 bg-white shadow-sm focus:shadow-md"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2",style:{gap:"clamp(0.75rem, 2vw, 1rem)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:[e.jsxs(O,{htmlFor:"phone",style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",fontWeight:500,color:"#374151"},children:[e.jsx(Dt,{style:{width:"1rem",height:"1rem",flexShrink:0}}),e.jsx("span",{children:"Telefon *"})]}),e.jsx(re,{id:"phone",type:"tel",required:!0,value:k.phone,onChange:n=>W({...k,phone:n.target.value}),placeholder:"+49 123 456789",className:"rounded-xl border-gray-200 bg-white shadow-sm focus:shadow-md",style:{color:M.textDark,height:"clamp(2rem, 5vw, 2.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",borderColor:k.phone&&!st(k.phone)?"#ef4444":void 0}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:[e.jsxs(O,{htmlFor:"email",style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",fontWeight:500,color:"#374151"},children:[e.jsx(Nt,{style:{width:"1rem",height:"1rem",flexShrink:0}}),e.jsx("span",{children:"E-Mail *"})]}),e.jsx(re,{id:"email",type:"email",required:!0,value:k.email,onChange:n=>W({...k,email:n.target.value}),placeholder:"max@example.com",className:"rounded-xl border-gray-200 bg-white shadow-sm focus:shadow-md",style:{color:M.textDark,height:"clamp(2rem, 5vw, 2.5rem)",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",borderColor:k.email&&!it(k.email)?"#ef4444":void 0}})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.375rem)"},children:[e.jsxs(O,{htmlFor:"message",style:{display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)",fontWeight:500,color:"#374151"},children:[e.jsx(_t,{style:{width:"1rem",height:"1rem",flexShrink:0}}),e.jsx("span",{children:"Nachricht"})]}),e.jsx(Vt,{id:"message",value:k.message,onChange:n=>W({...k,message:n.target.value}),placeholder:ie,rows:3,style:{color:M.textDark,fontSize:"clamp(0.8rem, 2.5vw, 0.875rem)"},className:"resize-none rounded-xl border-gray-200 bg-white shadow-sm focus:shadow-md"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"0.75rem",background:"#f9fafb",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx(vr,{id:"privacy",checked:Q,onCheckedChange:n=>Ce(n),style:{marginTop:"0.125rem"}}),e.jsxs(O,{htmlFor:"privacy",style:{fontSize:"clamp(0.75rem, 2.5vw, 0.875rem)",lineHeight:1.3,color:"#374151",cursor:"pointer",flex:1},children:["Ich habe die"," ",e.jsx("span",{onClick:n=>{n.preventDefault(),le(!0)},style:{color:q,textDecoration:"underline",cursor:"pointer"},children:"Datenschutzbestimmungen"})," ","gelesen und akzeptiere diese. *"]})]})]}),e.jsx("div",{children:e.jsx(V,{type:"submit",disabled:R||!f||!m||!jr(k).valid||!Q,style:{width:"100%",fontWeight:600,borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",transition:"all 0.2s",backgroundColor:q,color:Ae,height:"clamp(2.25rem, 6vw, 2.75rem)",fontSize:"clamp(0.875rem, 3vw, 1rem)",opacity:R||!f||!m||!Q?.5:1},children:e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"clamp(0.375rem, 1.5vw, 0.5rem)"},children:R?e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{width:"clamp(0.875rem, 2.5vw, 1rem)",height:"clamp(0.875rem, 2.5vw, 1rem)"},className:"animate-spin"}),"Wird gebucht..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{style:{width:"clamp(0.875rem, 2.5vw, 1rem)",height:"clamp(0.875rem, 2.5vw, 1rem)"}}),"Termin buchen"]})})})})]})]}),e.jsx(fe,{children:(h||T)&&e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:h?1:0,scale:h?1:.95},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:200,damping:20},style:{position:"absolute",inset:0,zIndex:40,background:"#ffffff",borderRadius:"1rem",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"28rem",width:"100%"},children:[y.autoConfirmed?e.jsx(S.div,{initial:{scale:0,rotate:-180},animate:{scale:h?1:0,rotate:h?0:-180},transition:{type:"spring",stiffness:200,damping:15,delay:.2},style:{marginBottom:"clamp(1rem, 4vw, 1.5rem)"},children:e.jsx("div",{style:{width:"clamp(4rem, 15vw, 6rem)",height:"clamp(4rem, 15vw, 6rem)",margin:"0 auto",background:"#dcfce7",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{style:{width:"clamp(2.5rem, 10vw, 3.5rem)",height:"clamp(2.5rem, 10vw, 3.5rem)",color:"#16a34a"}})})}):e.jsx(Lt,{}),e.jsx("h2",{style:{fontWeight:700,color:"#111827",fontSize:"clamp(1.5rem, 5vw, 1.875rem)",marginBottom:"clamp(0.5rem, 2vw, 0.75rem)"},children:"Nice to see you!"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"clamp(0.875rem, 3vw, 1rem)",marginBottom:"clamp(0.25rem, 1vw, 0.5rem)"},children:y.autoConfirmed?"Ihr Termin wurde erfolgreich gebucht!":"Ihre Terminanfrage wurde eingereicht!"}),e.jsxs("p",{style:{fontWeight:600,color:"#111827",fontSize:"clamp(1rem, 3.5vw, 1.125rem)",marginBottom:"clamp(2rem, 6vw, 3rem)"},children:[y.day," um ",y.time," Uhr"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(0.75rem, 2vw, 1rem)",width:"100%"},children:[y.id&&e.jsx(V,{onClick:()=>window.open(`${U}/termin/${y.id}`,"_blank"),style:{fontWeight:600,borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",transition:"all 0.2s",padding:"clamp(1rem, 4vw, 1.5rem) clamp(1.5rem, 6vw, 2rem)",fontSize:"clamp(0.875rem, 3vw, 1rem)",backgroundColor:y.autoConfirmed?"#2d62ff":"#10b981",color:"#ffffff",border:"none",cursor:"pointer"},children:"Zum Termin â†’"}),e.jsx(V,{onClick:jt,variant:"outline",style:{fontWeight:600,borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",transition:"all 0.2s",padding:"clamp(1rem, 4vw, 1.5rem) clamp(1.5rem, 6vw, 2rem)",fontSize:"clamp(0.875rem, 3vw, 1rem)",backgroundColor:"#ffffff",color:"#111827",border:"1px solid #e5e7eb",cursor:"pointer"},children:"Bis dann! ðŸ‘‹"})]})]})})}),e.jsx(fe,{children:T&&e.jsx(S.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:100,damping:25},style:{position:"absolute",inset:0,zIndex:50,background:"#ffffff",borderRadius:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(S.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(te,{style:{width:"4rem",height:"4rem",color:"#2563eb",margin:"0 auto 1rem"}})}),e.jsx("p",{style:{fontSize:"1.125rem",color:"#6b7280"},children:"Termin wird gebucht..."})]})})})]})})})]})}catch(n){return console.error("Render error:",n),w(`RENDER ERROR: ${n instanceof Error?n.message:"Unknown"}`),e.jsxs("div",{style:{maxWidth:"42rem",margin:"2rem auto",padding:"2rem",background:"#fee2e2",color:"#991b1b",borderRadius:"1rem",border:"2px solid #fca5a5"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Rendering Error"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Error:"})," ",n instanceof Error?n.message:"Unknown error"]}),e.jsx("pre",{style:{background:"white",padding:"1rem",borderRadius:"0.5rem",overflow:"auto",fontSize:"0.75rem"},children:n instanceof Error?n.stack:"No stack trace"})]})}}export{Br as default};
