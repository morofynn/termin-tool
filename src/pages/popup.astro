---
import AppointmentScheduler from '../components/AppointmentScheduler';
import { Toaster } from '../components/ui/sonner';
import '../../generated/fonts.css';
import '../site-components/global.css';
import '../styles/global.css';
import '../styles/component-fixes.css';
import '../styles/mobile-responsive.css';
---

<!DOCTYPE html>
<html lang="de" class="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
<title>Termin buchen</title>
<style>
html, body {
margin: 0;
padding: 0;
background: transparent;
overflow-x: hidden;
min-height: 100vh;
}

body {
/* Mobile-optimiertes Padding */
padding: 16px;
display: flex;
align-items: center;
justify-content: center;
min-height: 100vh;
}

@media (max-width: 768px) {
body {
padding: 8px;
}
}

@media (max-width: 480px) {
body {
padding: 4px;
}
}

.popup-container {
max-width: 100%;
width: 100%;
margin: 0 auto;
box-sizing: border-box;
}

/* Verhindere dass der Scheduler zu groß wird auf Mobile */
@media (max-width: 768px) {
.popup-container {
max-width: 100vw;
}
}

/* Fix für absolute/fixed positioned Elemente im Pop-up */
@media (max-width: 768px) {
[style*="position: fixed"],
[style*="position: absolute"] {
max-width: 100vw !important;
}

/* Test Buttons Container auf Mobile verstecken oder kleiner machen */
.test-buttons-container,
div[style*="position: fixed"][style*="top: 1rem"][style*="left: 1rem"] {
top: 4px !important;
left: 4px !important;
gap: 4px !important;
}

/* Test Buttons selbst verkleinern */
.test-buttons-container button,
div[style*="position: fixed"][style*="top: 1rem"][style*="left: 1rem"] button {
padding: 4px 6px !important;
font-size: 10px !important;
min-width: auto !important;
}

.test-buttons-container button svg,
div[style*="position: fixed"][style*="top: 1rem"][style*="left: 1rem"] button svg {
width: 12px !important;
height: 12px !important;
}
}

/* Spezielle Fixes für Pop-up Modus */
@media (max-width: 768px) {
/* Verhindere horizontales Scrollen */
* {
max-width: 100vw;
box-sizing: border-box;
}

/* Success/Loading Overlays an Viewport anpassen */
[style*="position: absolute"][style*="inset: 0"] {
left: 0 !important;
right: 0 !important;
max-width: 100vw !important;
}

/* Motion divs an Viewport anpassen */
[style*="maxWidth"][style*="clamp"] {
max-width: 100vw !important;
padding-left: 8px !important;
padding-right: 8px !important;
}

/* Card Elemente an Viewport anpassen */
[class*="card"],
[style*="borderRadius"][style*="background"] {
max-width: 100% !important;
margin-left: 0 !important;
margin-right: 0 !important;
}
}

/* Extra kleine Bildschirme (iPhone SE, etc.) */
@media (max-width: 375px) {
body {
padding: 2px;
}

[style*="padding"][style*="clamp"] {
padding: 8px !important;
}

/* Time Slots Grid auf kleineren Screens auf 3 Spalten reduzieren */
[style*="grid-template-columns: repeat(5, 1fr)"],
div[style*="gridTemplateColumns: repeat(5, 1fr)"] {
grid-template-columns: repeat(3, 1fr) !important;
}
}

/* Privacy Overlay Fixes für Pop-up */
@media (max-width: 768px) {
[style*="position: fixed"][style*="zIndex: 9999"] {
padding: 8px !important;
}

[style*="position: fixed"][style*="zIndex: 9999"] > div {
max-width: calc(100vw - 16px) !important;
max-height: 90vh !important;
}
}

/* Formulare - Touch-Friendly */
@media (max-width: 768px) {
input,
textarea,
button {
font-size: 16px !important; /* Verhindert Auto-Zoom auf iOS */
min-height: 44px;
touch-action: manipulation;
}

/* Kleinere Elemente für kleine Screens */
@media (max-width: 480px) {
button[style*="padding"] {
padding: 8px 12px !important;
}
}
}

/* Loading/Success Screen Optimierungen für Pop-up */
@media (max-width: 768px) {
/* Icon Wrapper verkleinern */
div[style*="width: clamp(4rem"] {
width: 3rem !important;
height: 3rem !important;
}

div[style*="width: clamp(2.5rem"] {
width: 2rem !important;
height: 2rem !important;
}

/* Text Größen anpassen */
h1[style*="fontSize: clamp(1.5rem"],
h2[style*="fontSize: clamp(1.5rem"] {
font-size: 1.25rem !important;
}

p[style*="fontSize: clamp(1rem"] {
font-size: 0.875rem !important;
}

button[style*="fontSize: clamp(0.875rem"] {
font-size: 0.75rem !important;
}
}

/* Debug Panel auf Mobile ausblenden oder verkleinern */
@media (max-width: 768px) {
div[style*="position: fixed"][style*="bottom: 10px"][style*="right: 10px"] {
max-width: 200px !important;
max-height: 150px !important;
font-size: 8px !important;
padding: 5px !important;
bottom: 4px !important;
right: 4px !important;
}
}
</style>
</head>
<body>
<div class="popup-container">
<AppointmentScheduler client:only="react" />
<Toaster client:only="react" />
</div>
</body>
</html>
